#!/usr/bin/env python
# coding: utf-8

# In[6]:


import vt
import nest_asyncio
from datetime import datetime

nest_asyncio.apply()
client = vt.Client("823592f3543d036bafeb9384aee98f7f7e89b44cc84370d49f0ac595200db9c0",agent='AndroidProject')

def analysis(filename):
    # Open the file with read only permit
    f = open(filename)
    # use readline() to read the first line 
    apk_name = f.readline()
    # use the read line to read further.
    # If the file is not empty keep reading one line
    # at a time, till the file is empty
    while apk_name:
        apk_name = apk_name.replace('\n','')
        print('Analysis begins! ' + apk_name)
        with open(apk_name, "rb") as apk:
            analysis = client.scan_file(apk,wait_for_completion=True)
            #print(analysis.__dict__)
            with open(f"analysis.txt", "a") as g:
                g.write('\n')
                g.write(apk_name + '\n')
                g.write(analysis.id + '\n')
                g.write(str(analysis.date) + '\n')
                g.write(str(analysis.stats) + '\n')
                g.write(str(analysis.results) + '\n')
            print('Analysis finished!')
            g.close()
        apk_name = f.readline()
    f.close()
    client.close()


# In[7]:


analysis('filenames.txt')


# In[ ]:




